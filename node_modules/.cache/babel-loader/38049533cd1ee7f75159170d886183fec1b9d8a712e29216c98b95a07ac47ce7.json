{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FilteredProducts=_ref=>{let{filteredProducts,searchTerm,allProducts}=_ref;const[isDropdownOpen,setIsDropdownOpen]=useState(false);const dropdownRef=useRef(null);const displayProducts=searchTerm?filteredProducts:[];// Close dropdown if clicked outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsDropdownOpen(false);}};// Attach event listener\ndocument.addEventListener(\"mousedown\",handleClickOutside);// Cleanup event listener on component unmount\nreturn()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[]);useEffect(()=>{if(searchTerm&&displayProducts.length>0){setIsDropdownOpen(true);}},[searchTerm,displayProducts]);return/*#__PURE__*/_jsxs(_Fragment,{children:[searchTerm&&displayProducts.length>0&&isDropdownOpen&&/*#__PURE__*/_jsx(\"div\",{ref:dropdownRef,className:\"search-results  mt-2 w-full max-w-full bg-white shadow-lg rounded-md dark:text-black transition-all ease-in-out\",children:/*#__PURE__*/_jsx(\"ul\",{children:displayProducts.map(product=>/*#__PURE__*/_jsx(\"li\",{className:\"p-2 hover:bg-gray-200 transition-all ease-in-out\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.id),onClick:()=>window.scrollTo(0,0),children:product.title})},product.id))})}),searchTerm&&displayProducts.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-results mt-2 w-full max-w-full bg-white shadow-lg rounded-md dark:text-black transition-all ease-in-out\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"No results found for \\\"\",searchTerm,\"\\\"\"]})})]});};export default FilteredProducts;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FilteredProducts","_ref","filteredProducts","searchTerm","allProducts","isDropdownOpen","setIsDropdownOpen","dropdownRef","displayProducts","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","length","children","ref","className","map","product","to","concat","id","onClick","window","scrollTo","title"],"sources":["C:/Users/natno/OneDrive/เดสก์ท็อป/School-Project/ecom-react-natnoppol/src/components/ui/filteredProducts.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst FilteredProducts = ({ filteredProducts, searchTerm, allProducts }) => {\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  const displayProducts = searchTerm ? filteredProducts : [];\r\n\r\n  // Close dropdown if clicked outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n\r\n    // Attach event listener\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    // Cleanup event listener on component unmount\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (searchTerm && displayProducts.length > 0) {\r\n      setIsDropdownOpen(true);\r\n    }\r\n  }, [searchTerm, displayProducts]);\r\n\r\n  return (\r\n    <>\r\n      {searchTerm && displayProducts.length > 0 && isDropdownOpen && (\r\n        <div\r\n          ref={dropdownRef}\r\n          className=\"search-results  mt-2 w-full max-w-full bg-white shadow-lg rounded-md dark:text-black transition-all ease-in-out\"\r\n        >\r\n          <ul>\r\n            {displayProducts.map((product) => (\r\n              <li key={product.id} className=\"p-2 hover:bg-gray-200 transition-all ease-in-out\">\r\n                <Link to={`/product/${product.id}`} onClick={() => window.scrollTo(0, 0)}>\r\n                  {product.title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {searchTerm && displayProducts.length === 0 && (\r\n        <div className=\"no-results mt-2 w-full max-w-full bg-white shadow-lg rounded-md dark:text-black transition-all ease-in-out\">\r\n          <p>No results found for \"{searchTerm}\"</p>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FilteredProducts;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExC,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAmD,IAAlD,CAAEC,gBAAgB,CAAEC,UAAU,CAAEC,WAAY,CAAC,CAAAH,IAAA,CACrE,KAAM,CAACI,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAAiB,WAAW,CAAGf,MAAM,CAAC,IAAI,CAAC,CAEhC,KAAM,CAAAgB,eAAe,CAAGL,UAAU,CAAGD,gBAAgB,CAAG,EAAE,CAE1D;AACAX,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIH,WAAW,CAACI,OAAO,EAAI,CAACJ,WAAW,CAACI,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CACtEP,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED;AACAQ,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAE1D;AACA,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENlB,SAAS,CAAC,IAAM,CACd,GAAIY,UAAU,EAAIK,eAAe,CAACS,MAAM,CAAG,CAAC,CAAE,CAC5CX,iBAAiB,CAAC,IAAI,CAAC,CACzB,CACF,CAAC,CAAE,CAACH,UAAU,CAAEK,eAAe,CAAC,CAAC,CAEjC,mBACEX,KAAA,CAAAE,SAAA,EAAAmB,QAAA,EACGf,UAAU,EAAIK,eAAe,CAACS,MAAM,CAAG,CAAC,EAAIZ,cAAc,eACzDV,IAAA,QACEwB,GAAG,CAAEZ,WAAY,CACjBa,SAAS,CAAC,iHAAiH,CAAAF,QAAA,cAE3HvB,IAAA,OAAAuB,QAAA,CACGV,eAAe,CAACa,GAAG,CAAEC,OAAO,eAC3B3B,IAAA,OAAqByB,SAAS,CAAC,kDAAkD,CAAAF,QAAA,cAC/EvB,IAAA,CAACF,IAAI,EAAC8B,EAAE,aAAAC,MAAA,CAAcF,OAAO,CAACG,EAAE,CAAG,CAACC,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAE,CAAAV,QAAA,CACtEI,OAAO,CAACO,KAAK,CACV,CAAC,EAHAP,OAAO,CAACG,EAIb,CACL,CAAC,CACA,CAAC,CACF,CACN,CAEAtB,UAAU,EAAIK,eAAe,CAACS,MAAM,GAAK,CAAC,eACzCtB,IAAA,QAAKyB,SAAS,CAAC,4GAA4G,CAAAF,QAAA,cACzHrB,KAAA,MAAAqB,QAAA,EAAG,yBAAsB,CAACf,UAAU,CAAC,IAAC,EAAG,CAAC,CACvC,CACN,EACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAAH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}