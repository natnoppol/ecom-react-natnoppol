{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{useCart}from\"../../hooks/CartContext\";import{PriceTagForSingleProduct}from\"../../components/ui/priceTag\";import{SingleProductContainer,SingleProductResponsive}from\"../../components/ui/singleProduct\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){var _product$data$image,_product$data$image2;const{id}=useParams();const[product,setProduct]=useState(null);const{addToCart}=useCart();const[addedToCart,setAddedToCart]=useState(false);// Async function to fetch the product data\nconst fetchProduct=async()=>{try{const res=await fetch(\"https://v2.api.noroff.dev/online-shop/\".concat(id));const data=await res.json();setProduct(data);}catch(error){console.error(\"Error fetching product data:\",error);}};// Call the fetchProduct function when the component mounts\nuseEffect(()=>{fetchProduct();},[id]);if(!product){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const handleAddToCart=()=>{addToCart(product);setAddedToCart(true);setTimeout(()=>{setAddedToCart(false);},2000);};return/*#__PURE__*/_jsxs(SingleProductContainer,{children:[/*#__PURE__*/_jsxs(SingleProductResponsive,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"aspect-square bg-gray-100 dark:bg-gray-800 \\r rounded-xl overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:((_product$data$image=product.data.image)===null||_product$data$image===void 0?void 0:_product$data$image.url)||\"/default-image.jpg\",alt:((_product$data$image2=product.data.image)===null||_product$data$image2===void 0?void 0:_product$data$image2.alt)||\"Product Image\",className:\"w-full h-full object-cover\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-2\",children:product.data.title})}),/*#__PURE__*/_jsx(PriceTagForSingleProduct,{price:product.data.price,discountedPrice:product.data.discountedPrice})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold\",children:product.data.description}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"flex-1 bg-sky-800 text-white py-4 rounded-xl hover:bg-sky-800/90\",onClick:handleAddToCart,children:addedToCart?\"Added!\":\"Add to cart\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-8\",children:/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 text-sky-700 border-b-2 border-sky-700 dark:text-white font-bold\",children:\"Reviews\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 grid md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start gap-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-1\",children:/*#__PURE__*/_jsx(\"div\",{children:product.data.reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold\",children:review.username}),/*#__PURE__*/_jsx(\"p\",{children:review.comment}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 font-semibold\",children:review.description})]},review.id))})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:product.data.reviews.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-5xl font-bold text-sky-700\",children:[\"Rating \",product.data.reviews[0].rating]})})})]})]})]});}export default ProductPage;","map":{"version":3,"names":["useEffect","useState","useParams","useCart","PriceTagForSingleProduct","SingleProductContainer","SingleProductResponsive","jsx","_jsx","jsxs","_jsxs","ProductPage","_product$data$image","_product$data$image2","id","product","setProduct","addToCart","addedToCart","setAddedToCart","fetchProduct","res","fetch","concat","data","json","error","console","children","handleAddToCart","setTimeout","className","src","image","url","alt","title","price","discountedPrice","description","onClick","reviews","map","review","username","comment","length","rating"],"sources":["C:/Users/natno/OneDrive/เดสก์ท็อป/School-Project/ecom-react-natnoppol/src/pages/product/ProductPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useCart } from \"../../hooks/CartContext\";\r\nimport { PriceTagForSingleProduct } from \"../../components/ui/priceTag\";\r\nimport {\r\n  SingleProductContainer,\r\n  SingleProductResponsive,\r\n} from \"../../components/ui/singleProduct\";\r\n\r\nfunction ProductPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const { addToCart } = useCart();\r\n  const [addedToCart, setAddedToCart] = useState(false);\r\n\r\n  // Async function to fetch the product data\r\n  const fetchProduct = async () => {\r\n    try {\r\n      const res = await fetch(`https://v2.api.noroff.dev/online-shop/${id}`);\r\n      const data = await res.json();\r\n      setProduct(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching product data:\", error);\r\n    }\r\n  };\r\n\r\n  // Call the fetchProduct function when the component mounts\r\n  useEffect(() => {\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  if (!product) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  const handleAddToCart = () => {\r\n    addToCart(product);\r\n    setAddedToCart(true);\r\n\r\n    setTimeout(() => {\r\n      setAddedToCart(false);\r\n    }, 2000);\r\n  };\r\n\r\n  return (\r\n    <SingleProductContainer>\r\n      <SingleProductResponsive>\r\n        <div className=\"space-y-4\">\r\n          <div\r\n            className=\"aspect-square bg-gray-100 dark:bg-gray-800 \r\n          rounded-xl overflow-hidden\"\r\n          >\r\n            <img\r\n              src={product.data.image?.url || \"/default-image.jpg\"}\r\n              alt={product.data.image?.alt || \"Product Image\"}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold mb-2\">{product.data.title}</h1>\r\n            </div>\r\n\r\n            <PriceTagForSingleProduct\r\n              price={product.data.price}\r\n              discountedPrice={product.data.discountedPrice}\r\n            />\r\n          </div>\r\n          <div className=\"text-lg font-semibold\">\r\n            {product.data.description}\r\n          </div>\r\n          <div className=\"flex gap-4\">\r\n            <button\r\n              className=\"flex-1 bg-sky-800 text-white py-4 rounded-xl hover:bg-sky-800/90\"\r\n              onClick={handleAddToCart}\r\n            >\r\n              {addedToCart ? \"Added!\" : \"Add to cart\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </SingleProductResponsive>\r\n      {/* <!-- Reviews Section --> */}\r\n      <div className=\"mt-16\">\r\n        <div className=\"border-b border-gray-200 dark:border-gray-800\">\r\n          <div className=\"flex gap-8\">\r\n            <button className=\"px-4 py-2 text-sky-700 border-b-2 border-sky-700 dark:text-white font-bold\">\r\n              Reviews\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-8 grid md:grid-cols-2 gap-8\">\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-start gap-4\">\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <div>\r\n                    {product.data.reviews.map((review) => (\r\n                      <div key={review.id}>\r\n                        <h4 className=\"font-bold\">{review.username}</h4>\r\n                        <p>{review.comment}</p>\r\n                        <p className=\"text-gray-600 dark:text-gray-300 font-semibold\">\r\n                          {review.description}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Rating section */}\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex items-center gap-4\">\r\n              {product.data.reviews.length > 0 && (\r\n                <div className=\"text-5xl font-bold text-sky-700\">\r\n                  Rating {product.data.reviews[0].rating}\r\n                </div>\r\n              )}\r\n              \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </SingleProductContainer>\r\n  );\r\n}\r\n\r\nexport default ProductPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}